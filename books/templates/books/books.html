{% extends "base.html" %}

{% block meta_description %}Discover our amazing collection of books. Find your next great read with detailed descriptions, ratings, and cover images.{% endblock %}

{% block content %}
    <header>
        <h1 id="page-title">Our Book Collection</h1>
    </header>
    
    {% if books %}
        <section class="books-grid" aria-label="Book collection grid">
            {% for book in books %}
                <article class="book-card" role="article">
                    <a href="{% url 'book_detail' slug=book.slug %}" 
                       class="book-link" 
                       aria-label="View details for {{ book.book_title }} by {{ book.author }}">
                        
                        <!-- Book Cover Image with Accessibility -->
                        {% if book.cover_image and book.cover_image != 'placeholder' %}
                            <img src="{{ book.cover_image.url }}" 
                                 alt="{{ book.cover_image_alt|default:'Cover of '|add:book.book_title }}" 
                                 class="book-cover"
                                 loading="lazy"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="book-cover-placeholder" style="display: none;" role="img" 
                                 aria-label="Cover image not available for {{ book.book_title }}">
                                ðŸ“š<br>Image Not Available
                            </div>
                        {% else %}
                            <div class="book-cover-placeholder" role="img" 
                                 aria-label="Cover image not available for {{ book.book_title }}">
                                ðŸ“š<br>Image Not Available
                            </div>
                        {% endif %}
                        
                        <!-- Book Information -->
                        <h2 class="book-title">{{ book.book_title }}</h2>
                        <p class="book-author">by {{ book.author }}</p>
                        <p class="book-description">{{ book.book_description|truncatewords:30 }}</p>
                        <div class="book-rating" aria-label="Rating: {{ book.average_rating }} out of 5 stars">
                            Rating: {{ book.average_rating }}/5
                        </div>
                    </a>
                </article>
            {% endfor %}
        </section>
    {% else %}
        <section class="no-books" role="status" aria-live="polite">
            <p>No books available at the moment.</p>
            <p>Check back later for our latest collection!</p>
        </section>
    {% endif %}
{% endblock %}